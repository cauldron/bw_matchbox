{% include 'header.html' %}

{# Module-specific dependencies... #}

<link rel="stylesheet" href="{{ url_for('static', filename='css/comments.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/comments-threads-list.css') }}">

<script src="{{ url_for('static', filename='js/Comments/CommentsConstants.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/CommentsData.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/CommentsDataRender.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/CommentsHandlers.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/CommentsHelpers.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/CommentsLoader.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/CommentsNodes.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/CommentsStates.js') }}"></script>
<script src="{{ url_for('static', filename='js/Comments/Comments.js') }}"></script>

{# Core module:
  - `Comments` (from `bw_matchbox/assets/js/Comments/Comments.js`)
#}

<div id="comments-root" class="comments-root container empty loading">
  {# // TODO: Do we need `navigation` block here?
  #}
  {% include 'navigation.html' %}
  <div class="common-page-header">
    <h3 class="title">
      Comments
      {#
      <div class="tools">
        <div class="tools-wrapper">
          <a class="tools-icon theme-primary" onClick="Comments.copyToClipboardHandler(this)" data-node-type="source" title="Copy markdown link to clipboard"><i class="fa-solid fa-copy"></i></a>
        </div>
      </div>
      #}
    </h3>
  </div>
  <div class="page-filters">
    <span>Resolved state (no filter, resolved, open)</span>
    <span>Process (Can be a select element with multiple)</span>
    <span>Author (Again a select element)</span>
    <span>Participants</span>
    <span>Reset</span>
    <span>My comment threads</span>
  </div>
  <div id="comments-error" class="error">
    <!-- Error text comes here -->
  </div>

  <div id="threads-list-empty" class="threads-list-empty">No data has loaded</div>
  <div id="threads-list" class="threads-list">Data...</div>
  <div class="bottom-actions">
    <div class="bottom-actions-links">
      <a id="action-reload-random" onClick="Comments.clearAndReloadData(this)">Reload random data</a>
      <a id="action-load-more" onClick="Comments.loadMoreData(this)">Load more<span id="available-records-info"></span></a>
      <a id="action-clear-and-reload" onClick="Comments.clearAndReloadData(this)">Reload</a>
      <span id="show-total-comments-number">Loaded all the available comments (<span id="total-comments-number"></span>)</span>
    </div>
    <div id="loader-splash" class="loader-splash full-cover"><div class="loader-spinner"></div></div>
  </div>

</div>

<script type="text/javascript">
  modules.require('Comments', (Comments) => {
    // Initialize page data...
    const sharedParams = {
      base_url: '{{ base_url }}',
      role: '{{ config.role }}',
      user: '{{ config.user }}',
    };

    // Export to global scope (to access from generated html code handlers).
    window.Comments = Comments;

    // Start core module...
    Comments.start(sharedParams);
  });
</script>
{% include 'footer.html' %}
